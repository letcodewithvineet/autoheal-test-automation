<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AutoHeal - Self-Healing Test Automation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    }
                }
            }
        };
    </script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-slate-50 font-sans">

    <!-- @COMPONENT: AppLayout -->
    <div class="min-h-screen flex">
        
        <!-- @COMPONENT: Sidebar -->
        <div class="w-64 bg-white border-r border-slate-200 flex flex-col">
            <!-- Logo & Header -->
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center">
                        <i class="fas fa-robot text-white text-sm"></i>
                    </div>
                    <h1 class="text-xl font-bold text-slate-800">AutoHeal</h1>
                </div>
                <p class="text-sm text-slate-500 mt-1">Self-Healing Tests</p>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li>
                        <a href="#" class="flex items-center space-x-3 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg" data-mock="true">
                            <i class="fas fa-exclamation-triangle w-4 h-4"></i>
                            <span class="font-medium">Failures</span>
                            <span class="ml-auto bg-blue-600 text-white text-xs px-2 py-1 rounded-full" data-bind="failureCount">12</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                            <i class="fas fa-lightbulb w-4 h-4"></i>
                            <span>Suggestions</span>
                            <span class="ml-auto bg-orange-100 text-orange-800 text-xs px-2 py-1 rounded-full" data-bind="suggestionCount">5</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                            <i class="fas fa-check-circle w-4 h-4"></i>
                            <span>Approvals</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                            <i class="fas fa-code-branch w-4 h-4"></i>
                            <span>Pull Requests</span>
                        </a>
                    </li>
                    <li>
                        <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                            <i class="fas fa-crosshairs w-4 h-4"></i>
                            <span>Selectors</span>
                        </a>
                    </li>
                </ul>

                <div class="mt-8 pt-4 border-t border-slate-200">
                    <ul class="space-y-2">
                        <li>
                            <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                                <i class="fas fa-cog w-4 h-4"></i>
                                <span>Settings</span>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="flex items-center space-x-3 px-3 py-2 text-slate-700 hover:bg-slate-100 rounded-lg" data-mock="true">
                                <i class="fas fa-chart-bar w-4 h-4"></i>
                                <span>Analytics</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- Status Indicator -->
            <div class="p-4 border-t border-slate-200">
                <div class="flex items-center space-x-2 text-sm">
                    <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                    <span class="text-slate-600" data-bind="systemStatus">System Active</span>
                </div>
                <div class="text-xs text-slate-500 mt-1" data-bind="lastUpdate">Last update: 2 min ago</div>
            </div>
        </div>
        <!-- @END_COMPONENT: Sidebar -->

        <!-- @COMPONENT: MainContent -->
        <div class="flex-1 flex flex-col">
            
            <!-- @COMPONENT: TopBar -->
            <header class="bg-white border-b border-slate-200 px-6 py-4">
                <div class="flex items-center justify-between">
                    <div>
                        <h2 class="text-2xl font-bold text-slate-800">Test Failures</h2>
                        <p class="text-slate-600 mt-1">Monitor and resolve failing test cases</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <!-- Filter Controls -->
                        <div class="flex items-center space-x-2">
                            <select class="border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option data-mock="true">All Repos</option>
                                <option data-mock="true">frontend-app</option>
                                <option data-mock="true">api-service</option>
                            </select>
                            <select class="border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option data-mock="true">Last 7 days</option>
                                <option data-mock="true">Last 24 hours</option>
                                <option data-mock="true">Last month</option>
                            </select>
                        </div>
                        <!-- Refresh Button -->
                        <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center space-x-2" data-event="click:refreshData">
                            <i class="fas fa-sync-alt"></i>
                            <span>Refresh</span>
                        </button>
                    </div>
                </div>
            </header>
            <!-- @END_COMPONENT: TopBar -->

            <!-- @COMPONENT: FailuresList -->
            <div class="flex-1 p-6 overflow-auto">
                <div class="bg-white rounded-xl shadow-sm border border-slate-200">
                    <div class="p-6 border-b border-slate-200">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg font-semibold text-slate-800">Recent Failures</h3>
                            <div class="flex items-center space-x-2 text-sm text-slate-600">
                                <span data-bind="totalFailures">12 failures</span>
                                <span class="text-slate-400">â€¢</span>
                                <span data-bind="pendingSuggestions">5 pending suggestions</span>
                            </div>
                        </div>
                    </div>

                    <!-- @MAP: failures.map(failure => ( -->
                    <div class="divide-y divide-slate-200">
                        <!-- Failure Row 1 -->
                        <div class="p-6 hover:bg-slate-50 cursor-pointer transition-colors" data-event="click:viewFailure" data-mock="true">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-times text-red-600"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h4 class="text-lg font-semibold text-slate-800" data-bind="failure.testName">Login form validation test</h4>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">Failed</span>
                                        <span class="bg-orange-100 text-orange-800 text-xs font-medium px-2 py-1 rounded-full">2 Suggestions</span>
                                    </div>
                                    <div class="flex items-center space-x-4 text-sm text-slate-600 mb-3">
                                        <span><i class="fas fa-code-branch mr-1"></i><span data-bind="failure.repo">frontend-app</span></span>
                                        <span><i class="fas fa-file-code mr-1"></i><span data-bind="failure.specPath">cypress/e2e/auth.spec.ts</span></span>
                                        <span><i class="fas fa-globe mr-1"></i><span data-bind="failure.browser">Chrome 120</span></span>
                                        <span><i class="fas fa-clock mr-1"></i><span data-bind="failure.timestamp">15 min ago</span></span>
                                    </div>
                                    <div class="bg-slate-100 rounded-lg p-3 font-mono text-sm">
                                        <div class="text-slate-600 mb-1">Failed selector:</div>
                                        <div class="text-red-600" data-bind="failure.failedSelector">.login-btn-submit</div>
                                    </div>
                                </div>
                                <div class="flex-shrink-0">
                                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium" data-event="click:viewDetails">
                                        View Details
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Failure Row 2 -->
                        <div class="p-6 hover:bg-slate-50 cursor-pointer transition-colors" data-event="click:viewFailure" data-mock="true">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-times text-red-600"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h4 class="text-lg font-semibold text-slate-800" data-bind="failure.testName">Dashboard navigation test</h4>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">Failed</span>
                                        <span class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded-full">1 Approved</span>
                                    </div>
                                    <div class="flex items-center space-x-4 text-sm text-slate-600 mb-3">
                                        <span><i class="fas fa-code-branch mr-1"></i><span data-bind="failure.repo">frontend-app</span></span>
                                        <span><i class="fas fa-file-code mr-1"></i><span data-bind="failure.specPath">cypress/e2e/navigation.spec.ts</span></span>
                                        <span><i class="fas fa-globe mr-1"></i><span data-bind="failure.browser">Firefox 121</span></span>
                                        <span><i class="fas fa-clock mr-1"></i><span data-bind="failure.timestamp">1 hour ago</span></span>
                                    </div>
                                    <div class="bg-slate-100 rounded-lg p-3 font-mono text-sm">
                                        <div class="text-slate-600 mb-1">Failed selector:</div>
                                        <div class="text-red-600" data-bind="failure.failedSelector">#sidebar-nav .menu-item:nth-child(3)</div>
                                    </div>
                                </div>
                                <div class="flex-shrink-0 flex items-center space-x-2">
                                    <span class="text-green-600 text-sm font-medium">PR #423</span>
                                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium" data-event="click:viewDetails">
                                        View Details
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Failure Row 3 -->
                        <div class="p-6 hover:bg-slate-50 cursor-pointer transition-colors" data-event="click:viewFailure" data-mock="true">
                            <div class="flex items-start space-x-4">
                                <div class="flex-shrink-0">
                                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                                        <i class="fas fa-times text-red-600"></i>
                                    </div>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="flex items-center space-x-3 mb-2">
                                        <h4 class="text-lg font-semibold text-slate-800" data-bind="failure.testName">Product search functionality</h4>
                                        <span class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded-full">Failed</span>
                                        <span class="bg-blue-100 text-blue-800 text-xs font-medium px-2 py-1 rounded-full">Analyzing</span>
                                    </div>
                                    <div class="flex items-center space-x-4 text-sm text-slate-600 mb-3">
                                        <span><i class="fas fa-code-branch mr-1"></i><span data-bind="failure.repo">e-commerce-app</span></span>
                                        <span><i class="fas fa-file-code mr-1"></i><span data-bind="failure.specPath">cypress/e2e/search.spec.ts</span></span>
                                        <span><i class="fas fa-globe mr-1"></i><span data-bind="failure.browser">Chrome 120</span></span>
                                        <span><i class="fas fa-clock mr-1"></i><span data-bind="failure.timestamp">2 hours ago</span></span>
                                    </div>
                                    <div class="bg-slate-100 rounded-lg p-3 font-mono text-sm">
                                        <div class="text-slate-600 mb-1">Failed selector:</div>
                                        <div class="text-red-600" data-bind="failure.failedSelector">input[placeholder="Search products..."]</div>
                                    </div>
                                </div>
                                <div class="flex-shrink-0">
                                    <div class="flex items-center space-x-2">
                                        <div class="animate-spin w-4 h-4 border-2 border-blue-600 border-t-transparent rounded-full"></div>
                                        <span class="text-sm text-slate-600">Processing</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- @END_MAP )) -->
                </div>
            </div>
            <!-- @END_COMPONENT: FailuresList -->

        </div>
        <!-- @END_COMPONENT: MainContent -->

        <!-- @COMPONENT: FailureDetailPanel -->
        <div class="w-96 bg-white border-l border-slate-200 flex flex-col" id="failureDetailPanel" data-mock="true">
            <div class="p-6 border-b border-slate-200">
                <div class="flex items-center justify-between mb-4">
                    <h3 class="text-lg font-semibold text-slate-800">Failure Analysis</h3>
                    <button class="text-slate-400 hover:text-slate-600" data-event="click:closePanel">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="bg-red-50 border border-red-200 rounded-lg p-4">
                    <h4 class="font-semibold text-red-800 mb-1" data-bind="selectedFailure.testName">Login form validation test</h4>
                    <p class="text-red-700 text-sm" data-bind="selectedFailure.errorMessage">Element not found: .login-btn-submit</p>
                </div>
            </div>

            <div class="flex-1 overflow-auto p-6 space-y-6">
                
                <!-- Screenshot Section -->
                <div>
                    <h4 class="font-semibold text-slate-800 mb-3">Screenshot at Failure</h4>
                    <div class="border border-slate-200 rounded-lg overflow-hidden">
                        <!-- Mock screenshot showing a login form -->
                        <div class="bg-gray-100 h-48 flex items-center justify-center text-slate-500">
                            <div class="text-center">
                                <i class="fas fa-image text-4xl mb-2"></i>
                                <div class="text-sm">Screenshot: 1920x1080</div>
                                <div class="text-xs">Captured at failure point</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AI Suggestions Section -->
                <div>
                    <h4 class="font-semibold text-slate-800 mb-3 flex items-center">
                        <i class="fas fa-robot mr-2 text-blue-600"></i>
                        AI Suggestions
                    </h4>
                    
                    <!-- Suggestion 1 -->
                    <div class="space-y-3">
                        <div class="border border-slate-200 rounded-lg p-4 bg-green-50 border-green-200">
                            <div class="flex items-start justify-between mb-2">
                                <div class="font-medium text-slate-800">Recommended</div>
                                <div class="flex items-center space-x-2">
                                    <div class="bg-green-100 text-green-800 text-xs font-medium px-2 py-1 rounded">95% Confidence</div>
                                </div>
                            </div>
                            <div class="font-mono text-sm bg-white border border-green-200 rounded p-2 mb-2" data-bind="suggestion.selector">
                                [data-testid="login-submit-btn"]
                            </div>
                            <div class="text-sm text-slate-600" data-bind="suggestion.rationale">
                                Found data-testid attribute on button element. Most stable selector available.
                            </div>
                            <div class="flex items-center justify-between mt-3">
                                <span class="text-xs text-slate-500">Source: Heuristics + LLM</span>
                                <div class="flex space-x-2">
                                    <button class="bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-xs font-medium" data-event="click:approveSuggestion">
                                        Approve
                                    </button>
                                    <button class="text-slate-600 hover:text-slate-800 px-3 py-1 rounded text-xs" data-event="click:rejectSuggestion">
                                        Reject
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Suggestion 2 -->
                        <div class="border border-slate-200 rounded-lg p-4">
                            <div class="flex items-start justify-between mb-2">
                                <div class="font-medium text-slate-800">Alternative</div>
                                <div class="flex items-center space-x-2">
                                    <div class="bg-yellow-100 text-yellow-800 text-xs font-medium px-2 py-1 rounded">78% Confidence</div>
                                </div>
                            </div>
                            <div class="font-mono text-sm bg-slate-50 border border-slate-200 rounded p-2 mb-2" data-bind="suggestion.selector">
                                button[type="submit"]:has(text("Log In"))
                            </div>
                            <div class="text-sm text-slate-600" data-bind="suggestion.rationale">
                                Button with submit type and specific text. Good fallback if data-testid unavailable.
                            </div>
                            <div class="flex items-center justify-between mt-3">
                                <span class="text-xs text-slate-500">Source: Heuristics</span>
                                <div class="flex space-x-2">
                                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-medium" data-event="click:approveSuggestion">
                                        Approve
                                    </button>
                                    <button class="text-slate-600 hover:text-slate-800 px-3 py-1 rounded text-xs" data-event="click:rejectSuggestion">
                                        Reject
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Suggestion 3 -->
                        <div class="border border-slate-200 rounded-lg p-4">
                            <div class="flex items-start justify-between mb-2">
                                <div class="font-medium text-slate-800">Fallback</div>
                                <div class="flex items-center space-x-2">
                                    <div class="bg-red-100 text-red-800 text-xs font-medium px-2 py-1 rounded">45% Confidence</div>
                                </div>
                            </div>
                            <div class="font-mono text-sm bg-slate-50 border border-slate-200 rounded p-2 mb-2" data-bind="suggestion.selector">
                                .auth-form button.btn-primary
                            </div>
                            <div class="text-sm text-slate-600" data-bind="suggestion.rationale">
                                Class-based selector. May break with styling changes but currently unique.
                            </div>
                            <div class="flex items-center justify-between mt-3">
                                <span class="text-xs text-slate-500">Source: Heuristics</span>
                                <div class="flex space-x-2">
                                    <button class="bg-blue-600 hover:bg-blue-700 text-white px-3 py-1 rounded text-xs font-medium" data-event="click:approveSuggestion">
                                        Approve
                                    </button>
                                    <button class="text-slate-600 hover:text-slate-800 px-3 py-1 rounded text-xs" data-event="click:rejectSuggestion">
                                        Reject
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- DOM Context Section -->
                <div>
                    <h4 class="font-semibold text-slate-800 mb-3">DOM Context</h4>
                    <div class="border border-slate-200 rounded-lg p-4 bg-slate-50">
                        <pre class="text-xs text-slate-700 overflow-x-auto" data-bind="failure.domContext"><code>&lt;form class="auth-form"&gt;
  &lt;div class="form-group"&gt;
    &lt;input type="email" placeholder="Email" /&gt;
  &lt;/div&gt;
  &lt;div class="form-group"&gt;
    &lt;input type="password" placeholder="Password" /&gt;
  &lt;/div&gt;
  &lt;button 
    data-testid="login-submit-btn" 
    type="submit" 
    class="btn btn-primary"&gt;
    Log In
  &lt;/button&gt;
&lt;/form&gt;</code></pre>
                    </div>
                </div>

                <!-- Console Logs Section -->
                <div>
                    <h4 class="font-semibold text-slate-800 mb-3">Console Logs</h4>
                    <div class="border border-slate-200 rounded-lg p-4 bg-slate-50 max-h-32 overflow-y-auto">
                        <div class="space-y-1 text-xs font-mono">
                            <div class="text-red-600" data-mock="true">ERROR: Element not found: .login-btn-submit</div>
                            <div class="text-yellow-600" data-mock="true">WARN: Selector deprecated in v2.1.0</div>
                            <div class="text-slate-600" data-mock="true">INFO: Attempting fallback selectors...</div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="border-t border-slate-200 pt-4">
                    <div class="flex space-x-3">
                        <button class="flex-1 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium" data-event="click:regenerateSuggestions">
                            <i class="fas fa-sync mr-2"></i>
                            Regenerate
                        </button>
                        <button class="flex-1 border border-slate-300 hover:bg-slate-50 text-slate-700 px-4 py-2 rounded-lg text-sm font-medium" data-event="click:exportData">
                            <i class="fas fa-download mr-2"></i>
                            Export
                        </button>
                    </div>
                </div>

            </div>
        </div>
        <!-- @END_COMPONENT: FailureDetailPanel -->

    </div>
    <!-- @END_COMPONENT: AppLayout -->

    <!-- @COMPONENT: ApprovalModal -->
    <div id="approvalModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4" data-mock="true">
        <div class="bg-white rounded-xl shadow-xl max-w-md w-full">
            <div class="p-6 border-b border-slate-200">
                <h3 class="text-lg font-semibold text-slate-800">Approve Selector Change</h3>
                <p class="text-slate-600 text-sm mt-1">This will create a PR with the updated selector</p>
            </div>
            <div class="p-6">
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 mb-2">Current Selector</label>
                    <div class="bg-red-50 border border-red-200 rounded-lg p-3 font-mono text-sm text-red-600">
                        .login-btn-submit
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 mb-2">New Selector</label>
                    <div class="bg-green-50 border border-green-200 rounded-lg p-3 font-mono text-sm text-green-600">
                        [data-testid="login-submit-btn"]
                    </div>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-medium text-slate-700 mb-2">Notes (Optional)</label>
                    <textarea class="w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Add any notes about this change..."></textarea>
                </div>
                <div class="flex space-x-3">
                    <button class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium" data-event="click:confirmApproval">
                        Create PR
                    </button>
                    <button class="flex-1 border border-slate-300 hover:bg-slate-50 text-slate-700 px-4 py-2 rounded-lg text-sm font-medium" data-event="click:cancelApproval">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
    <!-- @END_COMPONENT: ApprovalModal -->

    <script>
        // TODO: Implement business logic, API calls, and state management
        
        (function() {
            // Mock data for demonstration
            const mockFailures = [
                {
                    id: '1',
                    testName: 'Login form validation test',
                    repo: 'frontend-app',
                    specPath: 'cypress/e2e/auth.spec.ts',
                    browser: 'Chrome 120',
                    timestamp: '15 min ago',
                    failedSelector: '.login-btn-submit',
                    status: 'failed'
                }
            ];

            // Initialize the application
            function initializeApp() {
                console.log('AutoHeal Dashboard initialized');
                
                // Set up event listeners for navigation
                setupNavigation();
                setupFailureSelection();
                setupModalHandlers();
            }

            function setupNavigation() {
                // Navigation between different sections
                const navLinks = document.querySelectorAll('nav a[data-mock="true"]');
                navLinks.forEach(link => {
                    link.addEventListener('click', (e) => {
                        e.preventDefault();
                        // TODO: Implement navigation state management
                        console.log('Navigate to:', e.target.textContent);
                    });
                });
            }

            function setupFailureSelection() {
                // Handle failure row selection
                const failureRows = document.querySelectorAll('[data-event="click:viewFailure"]');
                failureRows.forEach(row => {
                    row.addEventListener('click', (e) => {
                        // TODO: Load failure details and show panel
                        console.log('Selected failure for detailed view');
                        
                        // Highlight selected row
                        failureRows.forEach(r => r.classList.remove('bg-blue-50'));
                        row.classList.add('bg-blue-50');
                    });
                });
            }

            function setupModalHandlers() {
                // Approval modal handlers
                const approveButtons = document.querySelectorAll('[data-event="click:approveSuggestion"]');
                const modal = document.getElementById('approvalModal');
                
                approveButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        e.stopPropagation();
                        modal.classList.remove('hidden');
                        modal.classList.add('flex');
                    });
                });

                // Modal close handlers
                document.querySelector('[data-event="click:cancelApproval"]').addEventListener('click', () => {
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                });

                document.querySelector('[data-event="click:confirmApproval"]').addEventListener('click', () => {
                    // TODO: Submit approval to API and trigger PR creation
                    console.log('Creating PR with approved selector');
                    modal.classList.add('hidden');
                    modal.classList.remove('flex');
                });
            }

            // Initialize when DOM is ready
            if (document.readyState === 'loading') {
                document.addEventListener('DOMContentLoaded', initializeApp);
            } else {
                initializeApp();
            }
        })();
    </script>

</body>
</html>